{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}
{% block content %}
<div class="container-fluid">
	<div class="row mb-3">
		<div class="col-12">
			<div class="card border-0 shadow-sm">
				<div class="card-body d-flex justify-content-between align-items-center">
					<div>
						<h5 class="mb-1">MyPlanner</h5>
						<p class="mb-0 text-muted small">Resumen rápido de tu cuenta: eventos próximos y tareas pendientes. Usa los botones abajo para ver o crear contenido.</p>
					</div>
					<div class="text-end">
						<span class="badge bg-primary me-2">Eventos: {{ eventos|length }}</span>
						<span class="badge bg-secondary">Tareas: {{ tareas|length }}</span>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="row g-4">
		<div class="col-md-6">
			<div class="card">
				<div class="card-header bg-warning bg-opacity-25 text-dark rounded-top px-3 py-2">
					<h3 class="card-title mb-0">Próximos eventos</h3>
				</div>
				<div class="card-body">
					{% if eventos %}
						<ul class="list-unstyled">
						{% for evento in eventos %}
							<li class="mb-2">
								<strong>{{ evento.Nombre }}</strong>
								<div class="text-muted small">{{ evento.Fecha_evento }} {{ evento.Hora_evento or '' }}</div>
							</li>
						{% endfor %}
						</ul>
					{% else %}
						<p class="text-muted">No hay eventos próximos.</p>
						<!-- Plantilla de ejemplo: posibles eventos que podrías crear -->
						<div class="mt-3">
							<div class="sample-list-item">
								<div class="fw-bold">Reunión de equipo</div>
								<div class="sample-note">Fecha: 2025-11-03 • Hora: 10:00</div>
							</div>
							<div class="sample-list-item">
								<div class="fw-bold">Lanzamiento campaña</div>
								<div class="sample-note">Fecha: 2025-11-10 • Hora: 09:00</div>
							</div>
							<div class="sample-list-item">
								<div class="fw-bold">Cita con proveedor</div>
								<div class="sample-note">Fecha: 2025-11-15 • Hora: 16:00</div>
							</div>
						</div>
					{% endif %}
				</div>
			</div>
		</div>

		<div class="col-md-6">
			<div class="card">
				<div class="card-header bg-warning bg-opacity-25 text-dark rounded-top px-3 py-2">
					<h3 class="card-title mb-0">Tareas pendientes</h3>
				</div>
				<div class="card-body">
					{% if tareas %}
						<ul class="list-group">
						{% for tarea in tareas %}
							<li class="list-group-item d-flex justify-content-between align-items-start">
								<div>
									<div class="fw-bold">{{ tarea.Nombre }}</div>
									<div class="small text-muted">Vence: {{ tarea.Fecha_limite }}</div>
								</div>
								<span class="badge bg-secondary rounded-pill">P: {{ tarea.Prioridad }}</span>
							</li>
						{% endfor %}
						</ul>
					{% else %}
						<p class="text-muted">No hay tareas pendientes.</p>
					{% endif %}
				</div>
			</div>
		</div>
	</div>

	<div class="row mt-4">
		<div class="col-12">
			<a href="{{ url_for('events') }}" class="btn btn-outline-primary me-2">Ver todos los eventos</a>
			<a href="{{ url_for('ver_tareas') }}" class="btn btn-outline-secondary">Ver todas las tareas</a>
		</div>
	</div>
</div>
{% endblock %}
